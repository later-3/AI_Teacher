å¥½ï¼Œè¿™æ¬¡æˆ‘å°±å½“**æ­£å¼æ¶æ„è¯„å®¡æ–‡æ¡£**æ¥å†™ï¼ŒæŠŠä½ åˆšæ‰æåˆ°çš„ä¸‰ä¸ªå…³é”®ç‚¹å…¨éƒ¨çº³å…¥è¿›å»ï¼š

* âœ… é˜¶æ®µä¸€çš„æ•°æ®æ¨¡å‹ï¼šç¡®å®šä¸‹æ¥
* âœ… å¤„ç†é˜Ÿåˆ—ä¸çŠ¶æ€æµè½¬ï¼šçŠ¶æ€æœº + è§¦å‘æ–¹å¼ + é‡è¯•ç­–ç•¥
* âœ… Section / Chunk è´¨é‡æ ‡å‡†ï¼šæŒ‡æ ‡ã€ç­–ç•¥ã€æ”¯æŒäººå·¥æ ¡æ­£
* âœ… Ready-to-Embed schemaï¼šç»Ÿä¸€ JSON ç»“æ„ã€å¿…å¡«å­—æ®µã€æ ·ä¾‹
* âœ… é˜¶æ®µä¸€çš„å¼€å‘ä»»åŠ¡æ¸…å•ï¼ˆä¸å†™ä»£ç ï¼Œåªå†™èŒè´£ & æ¥å£å¥‘çº¦ï¼‰

ä½ å¯ä»¥ç›´æ¥æŠŠè¿™ä»½å½“ä½œã€Œé˜¶æ®µä¸€æ¶æ„è®¾è®¡æ–‡æ¡£ v2ã€ã€‚

---

# AI Teacher é¡¹ç›®

## é˜¶æ®µä¸€æ¶æ„è®¾è®¡æ–‡æ¡£ï¼ˆIngestion + è¯¾ç¨‹å»ºæ¨¡ï¼‰

### ç›®æ ‡ï¼ˆä¸€å¥è¯ï¼‰

> æŠŠç”¨æˆ·é€‰æ‹©/ä¸Šä¼ çš„èµ„æºï¼ˆè§†é¢‘ã€PPTã€PDFã€æ–‡æœ¬ï¼‰
> é€šè¿‡**é˜Ÿåˆ—åŒ–å¤„ç† â†’ ç»Ÿä¸€å†…å®¹ç‰‡æ®µ â†’ å°èŠ‚åˆ’åˆ† â†’ Chunk åŒ–**ï¼Œ
> äº§å‡ºä¸€æ‰¹**ç¬¦åˆç»Ÿä¸€ schema çš„ Ready-to-Embed Chunks**ï¼Œ
> ä¸ºé˜¶æ®µäºŒçš„å‘é‡åŒ–æä¾›ç¨³å®šã€å¯éªŒè¯çš„è¾“å…¥ã€‚

---

## 0. èŒƒå›´è¯´æ˜ï¼ˆScopeï¼‰

**æœ¬é˜¶æ®µè¦†ç›–ï¼š**

* æ•°æ®æ¨¡å‹è®¾è®¡ï¼š`Course / Lecture / Resource / ContentPiece / Section / Chunk`
* èµ„æºå¤„ç†æµç¨‹ï¼šè§†é¢‘ & æ–‡æ¡£å¤„ç†æµæ°´çº¿
* å¤„ç†é˜Ÿåˆ—ä¸çŠ¶æ€æµè½¬ï¼šçŠ¶æ€æœºè®¾è®¡ & è§¦å‘æ–¹å¼ & é‡è¯•ç­–ç•¥
* Section / Chunk è´¨é‡æ ‡å‡†ï¼šç²’åº¦æ§åˆ¶ & ç»Ÿè®¡ & æ ¡æ­£æ¥å£
* Ready-to-Embed schemaï¼šç»Ÿä¸€è¾“å‡ºæ ¼å¼ & æ ¡éªŒ

**æœ¬é˜¶æ®µä¸è¦†ç›–ï¼š**

* å‘é‡æ¨¡å‹ï¼ˆQwen3-Embeddingï¼‰çš„è°ƒç”¨
* å‘é‡æ•°æ®åº“ï¼ˆChromaï¼‰å†™å…¥
* RAG æ£€ç´¢ã€Teaching Engineã€TTSã€å‰ç«¯æ•™å­¦äº¤äº’

---

## 1. æ•°æ®æ¨¡å‹ï¼ˆæœ€ç»ˆç‰ˆï¼‰

> è¿™æ˜¯æ‰€æœ‰åç»­é˜¶æ®µçš„åŸºç¡€å¥‘çº¦ã€‚å­—æ®µå…è®¸æ‰©å±•ï¼Œä½†**ç¦æ­¢éšæ„åˆ æ”¹**ã€‚

### 1.1 å®ä½“åˆ—è¡¨

* `Course`ï¼šè¯¾ç¨‹
* `Lecture`ï¼šè®²æ¬¡ / ç« èŠ‚
* `Resource`ï¼šåŸå§‹èµ„æºï¼ˆvideo / ppt / pdf / textï¼‰
* `ContentPiece`ï¼šç»Ÿä¸€å†…å®¹ç‰‡æ®µï¼ˆæœ€å°æ–‡æœ¬å•å…ƒï¼‰
* `Section`ï¼šçŸ¥è¯†å°èŠ‚ï¼ˆæ•™å­¦é¢—ç²’åº¦ï¼‰
* `Chunk`ï¼šReady-to-Embed æ–‡æœ¬å—ï¼ˆembedding å•ä½ï¼‰

### 1.2 å­—æ®µæ¦‚è§ˆï¼ˆé€»è¾‘å±‚ï¼Œä¸å†™å…·ä½“ ORMï¼‰

#### Course

* `id`
* `name`
* `description`
* `created_by`
* `created_at`
* `updated_at`
* `metadata`ï¼ˆJSONï¼‰

#### Lecture

* `id`
* `course_id`
* `title`
* `order_index`
* `description`
* `metadata`ï¼ˆJSONï¼‰

#### Resource

* `id`
* `course_id`
* `lecture_id`ï¼ˆå¯ç©ºï¼Œåç»­ç»‘å®šï¼‰
* `type`: `video | ppt | pdf | text`
* `source_url`
* `original_filename`
* `status`: `pending | queued | running | succeeded | failed`
* `error_message`
* `retry_count`
* `metadata`ï¼ˆå¦‚æ—¶é•¿ã€é¡µæ•°ã€éŸ³é¢‘è·¯å¾„ç­‰ï¼‰
* `created_at`
* `updated_at`

> æ³¨æ„ï¼šè¿™é‡Œçš„ `status` å·²ç»å‡çº§ä¸ºä¸ä½ åˆšè¯´çš„çŠ¶æ€æœºä¸€è‡´ï¼ˆä¸‹é¢æœ‰è¯¦ç»†çŠ¶æ€æœºå›¾ï¼‰ã€‚

#### ContentPieceï¼ˆç»Ÿä¸€å†…å®¹ç‰‡æ®µï¼‰

* `id`
* `course_id`
* `lecture_id`ï¼ˆå¯ç©ºï¼‰
* `resource_id`
* `section_id`ï¼ˆå¯ç©ºï¼ŒSectioning å®Œæˆåå¡«ï¼‰
* `source_type`: `transcript | slide | pdf | text`
* `text`
* `language`ï¼ˆå¦‚ï¼š`zh`, `en`, `mixed`ï¼‰
* `raw_start_time`ï¼ˆç§’ï¼Œtranscript ç”¨ï¼‰
* `raw_end_time`ï¼ˆç§’ï¼Œtranscript ç”¨ï¼‰
* `page_number`ï¼ˆæ–‡æ¡£ç”¨ï¼‰
* `order_in_resource`ï¼ˆåŒä¸€èµ„æºå†…çš„é¡ºåºï¼‰
* `metadata`ï¼ˆJSONï¼‰

#### Sectionï¼ˆçŸ¥è¯†å°èŠ‚ï¼‰

* `id`
* `course_id`
* `lecture_id`
* `title`
* `summary`
* `order_in_lecture`
* `approx_start_time`ï¼ˆç§’ï¼Œå¯é€‰ï¼‰
* `approx_end_time`ï¼ˆç§’ï¼Œå¯é€‰ï¼‰
* `metadata`ï¼ˆJSONï¼šç”Ÿæˆè§„åˆ™è¯´æ˜ç­‰ï¼‰

#### Chunkï¼ˆReady-to-Embed å•ä½ï¼‰

> è¿™æ˜¯**é˜¶æ®µä¸€æœ€ç»ˆå¯¹å¤–çš„å¥‘çº¦ç»“æ„**ï¼Œä¼šåœ¨ä¸‹ä¸€èŠ‚ç”¨ JSON å…·ä½“åŒ–ã€‚

å…ˆç»™é€»è¾‘å­—æ®µï¼š

* `id`ï¼ˆchunk_idï¼‰
* `course_id`
* `lecture_id`
* `section_id`
* `text`
* `language`
* `source_type`ï¼ˆä¸»æ¥æºï¼Œå¦‚æœå¤šç§æ¥æºå¹¶å­˜å¯æ ‡è®°ä¸º `mixed`ï¼‰
* `source_ref`ï¼ˆåµŒå¥—å¯¹è±¡ï¼Œè¯¦è§ schemaï¼‰
* `order_in_section`
* `tokens_estimate`ï¼ˆä¼°ç®— token æ•°ï¼‰
* `metadata`ï¼ˆJSONï¼‰
* `created_at`

---

## 2. å¤„ç†é˜Ÿåˆ—ä¸çŠ¶æ€æµè½¬ï¼ˆå…³é”®ç‚¹ä¸€ï¼‰

### 2.1 çŠ¶æ€æœºå®šä¹‰

å¯¹ **Resource** å¼•å…¥ç»Ÿä¸€çš„çŠ¶æ€æœºï¼ˆé¢å‘æ‰€æœ‰é•¿ä»»åŠ¡ï¼šè§†é¢‘ä¸‹è½½ã€ASRã€PPT è§£æç­‰ï¼‰ã€‚

**çŠ¶æ€æµè½¬ï¼š**

```text
pending  â†’ queued  â†’ running  â†’ succeeded
   â”‚           â”‚         â”‚
   â”‚           â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â†’ failed
   â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â†’ failed
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ failed
```

### 2.2 çŠ¶æ€è¯­ä¹‰ & è§¦å‘æ–¹

| çŠ¶æ€          | å«ä¹‰                    | å…¸å‹è§¦å‘æ–¹                |
| ----------- | --------------------- | -------------------- |
| `pending`   | åˆšåˆ›å»ºï¼Œè¿˜æœªè¿›å…¥å¤„ç†é˜Ÿåˆ—          | èµ„æºåˆ›å»ºAPI              |
| `queued`    | å·²å…¥é˜Ÿï¼Œç­‰å¾… worker æ‹‰å–      | èµ„æºå¤„ç†è°ƒåº¦é€»è¾‘             |
| `running`   | æ­£åœ¨è¢«æŸä¸ª worker å¤„ç†       | worker å–å‡ºä»»åŠ¡æ—¶         |
| `succeeded` | å¤„ç†æˆåŠŸï¼Œå·²ç”Ÿæˆ ContentPiece | worker æˆåŠŸå®Œæˆå¤„ç†        |
| `failed`    | å¤„ç†å¤±è´¥ï¼Œè®°å½•é”™è¯¯ä¿¡æ¯           | worker æ•è·å¼‚å¸¸ / é‡è¯•ä¸Šé™è€—å°½ |

### 2.3 æ‰§è¡Œæ–¹å¼é€‰æ‹©ï¼ˆæ¨èï¼‰

**æ¨èæ–¹æ¡ˆï¼šç»Ÿä¸€ç”¨é˜Ÿåˆ— + åå° workerï¼š**

* æŠ€æœ¯é€‰å‹å¯ä»¥æ˜¯ï¼š

  * Celery + Redis
  * æˆ– RQ + Redis
  * æˆ–è‡ªç ”ç®€æ˜“é˜Ÿåˆ—ï¼ˆMVP æ—¶ä»…ç”¨çº¿ç¨‹æ±  + DB è½®è¯¢ï¼‰

**åŸåˆ™ï¼š**

* æ‰€æœ‰é•¿è€—æ—¶æ“ä½œï¼ˆä¸‹è½½ã€ASRã€PPT/PDF è§£æï¼‰ä¸€å¾‹ä¸¢è¿›é˜Ÿåˆ—
* API åªåšï¼š

  * åˆ›å»º Resource
  * å…¥é˜Ÿï¼ˆè®¾ç½®çŠ¶æ€ä¸º `queued`ï¼‰
  * ç«‹å³è¿”å›ï¼ˆä¸é˜»å¡ï¼‰

### 2.4 Worker è¡Œä¸ºè§„èŒƒ

å¯¹äºæ¯ä¸ª Resourceï¼š

1. Worker ä»é˜Ÿåˆ—æ‹¿åˆ° `resource_id`ï¼ŒæŸ¥ Resource ä¿¡æ¯
2. å°† Resource çŠ¶æ€è®¾ä¸º `running`
3. æ ¹æ® `resource.type` åˆ†å‘åˆ°å¯¹åº”å¤„ç†æµæ°´çº¿ï¼š

   * video â†’ è§†é¢‘å¤„ç†æµæ°´çº¿
   * ppt/pdf/text â†’ æ–‡æ¡£å¤„ç†æµæ°´çº¿
4. å¤„ç†æˆåŠŸï¼š

   * å†™å…¥å¯¹åº”çš„ ContentPiece
   * å¦‚æœéœ€è¦ï¼Œæ›´æ–° Resource.metadataï¼ˆå¦‚ `audio_path` / é¡µæ•°ç­‰ï¼‰
   * çŠ¶æ€è®¾ä¸º `succeeded`
5. å¤„ç†å¼‚å¸¸ï¼š

   * æ•è·å¼‚å¸¸ï¼Œå†™å…¥ `error_message`
   * æ ¹æ®é‡è¯•ç­–ç•¥å†³å®šæ˜¯é‡æ–°å…¥é˜Ÿè¿˜æ˜¯æ ‡è®° `failed`

### 2.5 é‡è¯•ç­–ç•¥

* Resource å¢åŠ å­—æ®µï¼š`retry_count`ï¼ˆé»˜è®¤ 0ï¼‰
* é‡è¯•é€»è¾‘ï¼ˆå»ºè®®ï¼‰ï¼š

  * æ¯æ¬¡å¤±è´¥æ—¶ï¼š

    * `retry_count += 1`
    * å¦‚æœ `retry_count < MAX_RETRY`ï¼ˆå»ºè®® 3ï¼‰ï¼š

      * çŠ¶æ€è®¾ä¸º `queued`ï¼Œé‡æ–°å…¥é˜Ÿ
    * å¦åˆ™ï¼š

      * çŠ¶æ€è®¾ä¸º `failed`ï¼Œä¿ç•™æœ€åä¸€æ¬¡ error_message
* åº”æä¾›ä¸€ä¸ª**â€œé‡æ–°æ’é˜Ÿâ€æ¥å£**ï¼š

  * è¾“å…¥ï¼š`resource_id`
  * å‰æï¼šå½“å‰çŠ¶æ€ä¸º `failed`
  * è¡Œä¸ºï¼š

    * `retry_count` æ¸…é›¶æˆ–å¢ 1ï¼ˆè§†ç­–ç•¥ï¼‰
    * çŠ¶æ€æ”¹ä¸º `queued`

### 2.6 æ—¥å¿—ä¸å¯è§‚æµ‹æ€§

* æ¯ä¸ªèµ„æºå¤„ç†é˜¶æ®µæ‰“å°ç»“æ„åŒ–æ—¥å¿—ï¼š

  * èµ„æº idã€course_idã€typeã€å½“å‰åŠ¨ä½œï¼ˆä¸‹è½½ä¸­/ASRä¸­/è§£æPPTä¸­ï¼‰
  * è€—æ—¶
  * é”™è¯¯æ ˆï¼ˆå¼‚å¸¸æ—¶ï¼‰

---

## 3. Section / Chunk è´¨é‡æ ‡å‡†ï¼ˆå…³é”®ç‚¹äºŒï¼‰

### 3.1 è®¾è®¡ç›®æ ‡

* **Section ç²’åº¦**ï¼šä¸€ä¸ª Section ä»£è¡¨ä¸€ä¸ªç›¸å¯¹å®Œæ•´çš„çŸ¥è¯†ç‚¹æˆ–è®²è§£æ®µè½ã€‚
* **Chunk ç²’åº¦**ï¼šé€‚åˆåš embedding çš„æ–‡æœ¬å—ï¼Œé•¿åº¦é€‚ä¸­ã€è¯­ä¹‰ç›¸å¯¹é›†ä¸­ã€‚
* å¦‚æœè¿™ä¸€å±‚åšå¾—å¤ªç²—æˆ–å¤ªä¹±ï¼Œåé¢çš„æ•™å­¦å¼•æ“ä¼šå¾ˆéš¾ç”¨ã€‚

### 3.2 Section è´¨é‡æ§åˆ¶

åœ¨ Sectioning é˜¶æ®µï¼Œå»ºè®® **åŒæ­¥äº§å‡ºç»Ÿè®¡ä¿¡æ¯**ï¼Œå¹¶åº”ç”¨ç®€å•è§„åˆ™è‡ªåŠ¨ä¼˜åŒ–ã€‚

**å¯¹æ¯ä¸ª Section ç»Ÿè®¡ï¼š**

* `content_piece_count`ï¼šåŒ…å«å¤šå°‘ ContentPiece
* `total_chars`ï¼šæ€»å­—æ•°ï¼ˆæˆ– `total_tokens_estimate`ï¼‰
* `time_span`ï¼šå¯¹è§†é¢‘å†…å®¹ï¼Œ`approx_end_time - approx_start_time`ï¼ˆç§’ï¼‰
* æ¥æºç±»å‹åˆ†å¸ƒï¼ˆçº¯ transcript / æ··åˆ slide / textï¼‰

**å»ºè®®åˆç†åŒºé—´ï¼ˆå¯è°ƒå‚æ•°ï¼‰ï¼š**

* æ€»å­—æ•°ï¼š**250â€“800 å­—**
* æ—¶é—´è·¨åº¦ï¼š**3â€“8 åˆ†é’Ÿ**
* ContentPiece æ•°é‡ï¼š**3â€“20 æ®µ**ï¼ˆé¿å…ä¸€èŠ‚åªæœ‰ä¸€å¥è¯æˆ–è€…å‡ åæ®µï¼‰

**è‡ªåŠ¨è°ƒæ•´ç­–ç•¥ï¼ˆMVP ç‰ˆæœ¬ï¼‰ï¼š**

1. **è¿‡å°çš„ Sectionï¼ˆå¤ªçŸ­ã€å¤ªå°‘å­—ï¼‰ï¼š**

   * è§„åˆ™ï¼š`total_chars < MIN_CHARS` æˆ– `time_span < MIN_TIME`
   * ç­–ç•¥ï¼šå°è¯•ä¸å‰ä¸€ä¸ªæˆ–åä¸€ä¸ª Section åˆå¹¶ï¼š

     * åŒä¸€ä¸ª Lecture å†…ï¼Œåˆå¹¶åé‡æ–°è®¡ç®—ç»Ÿè®¡å€¼

2. **è¿‡å¤§çš„ Sectionï¼š**

   * è§„åˆ™ï¼š`total_chars > MAX_CHARS` æˆ– `time_span > MAX_TIME`
   * ç­–ç•¥ï¼šåœ¨è¯¥ Section å†…å†åšä¸€æ¬¡äºŒçº§åˆ’åˆ†ï¼š

     * æŒ‰æ—¶é—´æˆ– ContentPiece é¡ºåºæ‹†æˆ 2~N ä¸ª Section
     * æ‹†åˆ†æ—¶å°½é‡ä¿è¯æ¯ä¸ªæ–° Section è½åœ¨åˆç†åŒºé—´

3. **æ ‡é¢˜ä¸ cue wordsï¼š**

   * åœ¨ transcript ä¸­æ£€æµ‹ä¸€äº›â€œåˆ†æ®µæç¤ºè¯â€ï¼š

     * ä¾‹å¦‚ï¼šâ€œæ¥ä¸‹æ¥æˆ‘ä»¬è®²â€¦â€ï¼Œâ€œç¬¬äºŒéƒ¨åˆ†æ˜¯â€¦â€ï¼Œâ€œæ€»ç»“ä¸€ä¸‹åˆšæ‰çš„å†…å®¹â€¦â€
   * å¯ä½œä¸º Section åˆ†ç•Œå€™é€‰ç‚¹ï¼Œåœ¨æ‹†åˆ†/åˆå¹¶æ—¶ä¼˜å…ˆè€ƒè™‘è¿™äº›è¾¹ç•Œ
   * PPT é¡µæ ‡é¢˜ä¹Ÿå¯ä½œä¸º Section æ ‡é¢˜å€™é€‰

### 3.3 äººå·¥æ ¡æ­£æ¥å£ï¼ˆå»ºè®®ï¼‰

ä¸ºé¿å…â€œè‡ªåŠ¨åˆ’åˆ†ä¸å¤Ÿç†æƒ³â€å½±å“åç»­æ•™å­¦ä½“éªŒï¼Œé¢„ç•™äººå·¥æ ¡æ­£èƒ½åŠ›ï¼š

* æä¾› Section ç®¡ç†æ¥å£ï¼ˆé¢å‘å†…ç½‘è¿è¥æˆ–é«˜çº§ç”¨æˆ·ï¼‰ï¼š

  * åˆ—å‡ºæŸ course çš„ Section åˆ—è¡¨åŠç»Ÿè®¡æ•°æ®
  * æ”¯æŒï¼š

    * ä¿®æ”¹ Section æ ‡é¢˜ / summary
    * åˆå¹¶ Sectionï¼ˆA+Bâ†’Cï¼‰
    * æ‹†åˆ† Sectionï¼ˆéœ€è¦é«˜çº§ UIï¼Œå¯åç§»ï¼‰
* è¿™ä¸€æ­¥åœ¨ MVP å¯ä»¥åªåš**æ ‡é¢˜ç¼–è¾‘**å’Œç²—ç²’åº¦åˆå¹¶ï¼Œæ‹†åˆ†å¯ç•™ç»™æœªæ¥ç‰ˆæœ¬ã€‚

---

### 3.4 Chunk è´¨é‡æ ‡å‡†

**Chunk ç²’åº¦æ˜¯ä¸ºâ€œå‘é‡åŒ–â€æœåŠ¡ï¼Œæ ‡å‡†æ›´åæŠ€æœ¯ï¼š**

* æ¯ä¸ª Chunk ç›®æ ‡é•¿åº¦ï¼š**200â€“500 å­—**
* ä¸è·¨ Sectionï¼šä¸€ä¸ª Chunk åªå±äºä¸€ä¸ª Section
* é¿å…è¿‡ç¢ï¼ˆ< 50 å­—ï¼‰å’Œè¿‡é•¿ï¼ˆ> 800 å­—ï¼‰

**Chunk ç”Ÿæˆç­–ç•¥ï¼š**

1. å¯¹æ¯ä¸ª Sectionï¼š

   * æŒ‰ `order_in_resource` éå† ContentPiece
   * ç”¨ä¸€ä¸ªæ»‘åŠ¨çª—å£ç´¯ç§¯ textï¼š

     * è‹¥å½“å‰ç´¯ç§¯é•¿åº¦ < TARGET_MIN_CHARSï¼Œåˆ™ç»§ç»­ç´¯ç§¯ä¸‹ä¸€ç‰‡
     * è‹¥åˆ°è¾¾ TARGET_MAX_CHARS æˆ–æ²¡æœ‰æ›´å¤šç‰‡æ®µï¼Œåˆ™åˆ‡åˆ†å‡ºä¸€ä¸ª Chunk

2. ç»Ÿè®¡æ¯ä¸ª Chunk çš„ï¼š

   * `tokens_estimate`ï¼ˆç®€å•ç”¨å­—ç¬¦æ•° / 2ï¼Œæˆ–ç”¨ tokenizer ä¼°ç®—ï¼‰

**è´¨é‡æ ¡éªŒï¼š**

* ç”Ÿæˆ Chunk åï¼Œå¯è®¡ç®—ï¼š

  * æ¯ä¸ª Section çš„ Chunk æ•°é‡
  * Chunk é•¿åº¦åˆ†å¸ƒï¼ˆå¹³å‡å€¼ / æœ€å¤§å€¼ / æœ€å°å€¼ï¼‰
* å¦‚æœæŸäº› Section çš„ Chunk ä¸ªæ•° > æŸé˜ˆå€¼ï¼ˆæ¯”å¦‚ 20ï¼‰ï¼Œè¯´æ˜ Section ç²’åº¦å¯èƒ½å¤ªå¤§ï¼Œéœ€è¦å›å»è°ƒæ•´ Sectioning ç­–ç•¥ï¼ˆè¿™å°±æ˜¯ä½ è¯´çš„**â€œéªŒè¯ä¸è°ƒæ•´æµç¨‹â€**ï¼‰

---

## 4. Ready-to-Embed Schemaï¼ˆå…³é”®ç‚¹ä¸‰ï¼‰

> è¿™æ˜¯é˜¶æ®µä¸€æœ€ç»ˆå¯¹å¤–çš„å¥‘çº¦ï¼Œé˜¶æ®µäºŒçš„ embedding pipeline åªè®¤å®ƒã€‚

### 4.1 ç»Ÿä¸€ JSON Schemaï¼ˆé€»è¾‘çº¦å®šï¼‰

ä¸€ä¸ª Chunk å¯¹å¤–è¾“å‡ºçš„ JSON å¯¹è±¡æ ¼å¼å®šä¹‰å¦‚ä¸‹ï¼š

```jsonc
{
  "chunk_id": "string",          // å¿…å¡«ï¼ŒChunk å”¯ä¸€æ ‡è¯†ï¼ˆuuid æˆ–è‡ªå¢idè½¬å­—ç¬¦ä¸²ï¼‰
  "course_id": "string",         // å¿…å¡«
  "lecture_id": "string",        // å¿…å¡«ï¼ˆæš‚å…è®¸ 'null'ï¼Œä½†æ¨èæ€»æ˜¯æœ‰ï¼‰
  "section_id": "string",        // å¿…å¡«ï¼ˆChunk å¿…é¡»æŒ‚åœ¨æŸä¸ª section ä¸‹ï¼‰

  "text": "string",              // å¿…å¡«ï¼Œå®é™…é€å…¥ embedding çš„æ–‡æœ¬
  "language": "string",          // å¿…å¡«ï¼Œä¾‹å¦‚ "zh", "en", "mixed"

  "source_type": "string",       // å¿…å¡«ï¼Œä¸»æ¥æºç±»å‹ï¼š
                                 // "transcript" | "slide" | "pdf" | "text" | "mixed"

  "source_ref": {                // å¿…å¡«å¯¹è±¡ï¼Œä½†å†…éƒ¨å­—æ®µå…è®¸ä¸ºç©º
    "resource_id": "string",     // è‡³å°‘ä¿è¯ç¬¬ä¸€ä¸ª/ä¸»æ¥æº resource_id
    "start_time": 0.0,           // å¯é€‰ï¼Œç§’ï¼Œå¯¹è§†é¢‘ç±» chunk æœ‰æ„ä¹‰
    "end_time": 0.0,             // å¯é€‰
    "page_number": null          // å¯é€‰ï¼Œå¯¹æ–‡æ¡£ç±» chunk æœ‰æ„ä¹‰
  },

  "order_in_section": 0,         // å¿…å¡«ï¼ŒChunk åœ¨ section ä¸­çš„é¡ºåºï¼ˆä» 0 æˆ– 1 å¼€å§‹ï¼‰

  "tokens_estimate": 180,        // å¿…å¡«ï¼Œç”¨äºä¼°ç®—é•¿åº¦ï¼Œåç»­æ§åˆ¶ä¸Šä¸‹æ–‡çª—å£

  "metadata": {                  // å¯é€‰ JSONï¼Œæ‰©å±•å­—æ®µï¼š
    "source_piece_ids": ["123", "124"],
    "time_ranges": [[12.3, 25.6], [25.6, 40.0]],   // å¯é€‰ï¼Œè‹¥æ¥è‡ªå¤šä¸ªç‰‡æ®µ
    "page_numbers": [3, 4],                        // å¯é€‰
    "source_types": ["transcript", "slide"],       // å¤šæ¥æºæ—¶ä½¿ç”¨
    "extra_tags": ["definition", "example"]        // LLM æ‰“çš„æ ‡ç­¾
  }
}
```

### 4.2 å¿…å¡«å­—æ®µçº¦å®š

**å¿…é¡»æœ‰å€¼ï¼ˆä¸å…è®¸ç¼ºå¤± / nullï¼‰ï¼š**

* `chunk_id`
* `course_id`
* `lecture_id`ï¼ˆå¦‚æœæŸ Chunk ä¸å±äºä»»ä½• Lectureï¼Œå¯ä»¥çº¦å®šä¸º `"0"` æˆ– `"unknown"`ï¼Œä½†ä¸è¦çœç•¥ keyï¼‰
* `section_id`
* `text`ï¼ˆéç©ºå­—ç¬¦ä¸²ï¼‰
* `language`
* `source_type`
* `source_ref`ï¼ˆå¯¹è±¡æœ¬èº«å¿…å¡«ï¼Œå†…éƒ¨å­—æ®µå¯ä¸ºç©ºï¼‰
* `order_in_section`
* `tokens_estimate`
* `metadata`ï¼ˆè‡³å°‘æ˜¯ä¸€ä¸ª `{}`ï¼‰

**å¯ä¸ºç©ºï¼ˆå¯ä»¥æ˜¯ null æˆ–ç¼ºçœï¼‰ï¼š**

* `source_ref.start_time`, `source_ref.end_time`ï¼ˆéè§†é¢‘å¯ä¸º nullï¼‰
* `source_ref.page_number`ï¼ˆéæ–‡æ¡£å¯ä¸º nullï¼‰
* `metadata` å†…éƒ¨å­—æ®µï¼ˆå…¨å¯é€‰ï¼‰

### 4.3 æ ·ä¾‹æ•°æ®ï¼ˆå®Œæ•´ç¤ºä¾‹ï¼‰

```json
{
  "chunk_id": "chunk_000123",
  "course_id": "course_001",
  "lecture_id": "lec_01",
  "section_id": "sec_01_03",

  "text": "åœ¨è¿™ä¸€èŠ‚é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å‡ºå‘ï¼Œè§£é‡Šä»€ä¹ˆæ˜¯æŸå¤±å‡½æ•°ã€‚å‡è®¾ä½ åœ¨åšæˆ¿ä»·é¢„æµ‹â€¦â€¦ï¼ˆç•¥ï¼‰",
  "language": "zh",
  "source_type": "mixed",

  "source_ref": {
    "resource_id": "res_video_01",
    "start_time": 320.5,
    "end_time": 410.2,
    "page_number": null
  },

  "order_in_section": 2,
  "tokens_estimate": 210,

  "metadata": {
    "source_piece_ids": ["cp_1012", "cp_1013", "cp_1050"],
    "time_ranges": [[320.5, 350.0], [350.0, 410.2]],
    "page_numbers": [],
    "source_types": ["transcript"],
    "extra_tags": ["loss_function", "definition"]
  }
}
```

### 4.4 Schema æ ¡éªŒï¼ˆéªŒæ”¶æ ‡å‡†ï¼‰

* é˜¶æ®µä¸€ç»“æŸå‰ï¼Œè¦æœ‰ä¸€ä¸ª**schema æ ¡éªŒæ­¥éª¤**ï¼š

  * å¯ä»¥æ˜¯è„šæœ¬ï¼šè¯»å–æ‰€æœ‰ Chunkï¼ŒéªŒè¯ä¸Šè¿°å­—æ®µæ˜¯å¦å…¨éƒ¨å­˜åœ¨ä¸”ç±»å‹åˆç†
  * ä¹Ÿå¯ä»¥ç”¨ JSON Schema å·¥å…·åšè‡ªåŠ¨æ ¡éªŒ
* é˜¶æ®µäºŒï¼ˆEmbeddingï¼‰åªæ¥å—é€šè¿‡æ ¡éªŒçš„ Chunkï¼š

  * å¦‚æœæœ‰å­—æ®µç¼ºå¤±/ç±»å‹é”™è¯¯ï¼Œç›´æ¥æŠ¥é”™ï¼Œé€€å›é˜¶æ®µä¸€ä¿®æ­£
  * ä»¥æ­¤é¿å…â€œåé¢æ‰å‘ç°å‰é¢è¾“å‡ºä¹±äº†â€çš„æƒ…å†µ

---

## 5. é˜¶æ®µä¸€å¼€å‘ä»»åŠ¡æ€»è§ˆï¼ˆå¸¦å…³é”®ç‚¹ï¼‰

> æŒ‰ä½ å›¢é˜Ÿè§†è§’ï¼Œè¿™ä¸€èŠ‚å¯ä»¥ç›´æ¥å˜æˆâ€œçœ‹æ¿ä»»åŠ¡â€ã€‚

### 5.1 æ•°æ®æ¨¡å‹ä¸å­˜å‚¨å±‚

* æŒ‰ä¸Šæ–‡å®šä¹‰å»ºè¡¨ / å»ºæ¨¡å‹ï¼ˆCourse / Lecture / Resource / ContentPiece / Section / Chunkï¼‰
* ç¡®ä¿ï¼š

  * Resource åŒ…å«çŠ¶æ€æœºå­—æ®µï¼š`status / retry_count / error_message`
  * Chunk èƒ½æ˜ å°„æˆ Ready-to-Embed schema ä¸­çš„ JSON ç»“æ„

### 5.2 é˜Ÿåˆ—ä¸çŠ¶æ€æµè½¬

* é€‰å‹ï¼šCelery/RQ/è‡ªç ”çº¿ç¨‹æ± å…¶ä¸€ï¼ˆå›¢é˜Ÿä¾èµ–æƒ…å†µå†³å®šï¼Œæ¶æ„ä¸Šåªè¦æ±‚â€œå¼‚æ­¥é˜Ÿåˆ—åŒ–â€ï¼‰
* å®ç°ï¼š

  * Resource å…¥é˜Ÿ APIï¼šçŠ¶æ€ `pending â†’ queued`
  * Workerï¼š`queued â†’ running â†’ succeeded / failed`
  * é‡è¯•ï¼šç»´æŠ¤ `retry_count`ï¼Œè§¦å‘é‡æ–°å…¥é˜Ÿ
  * â€œé‡æ–°æ’é˜Ÿâ€ APIï¼šç”¨äºæ‰‹åŠ¨é‡è·‘ `failed` ä»»åŠ¡

### 5.3 è§†é¢‘æµæ°´çº¿

* èƒ½ä» `resource_id`ï¼ˆvideoï¼‰ï¼š

  * ä¸‹è½½éŸ³é¢‘
  * ASR è½¬å½•
  * å†™å…¥ ContentPieceï¼ˆsource_type=transcriptï¼‰

### 5.4 æ–‡æ¡£æµæ°´çº¿

* èƒ½ä» `resource_id`ï¼ˆppt/pdf/textï¼‰ï¼š

  * è§£æä¸ºé¡µ/æ®µè½æ–‡æœ¬
  * å†™å…¥ ContentPieceï¼ˆsource_type=slide/pdf/textï¼‰

### 5.5 Sectioning Engine

* åŸºäº ContentPieceï¼š

  * å¯¹æ¯ä¸ª course/lLecture è¿›è¡Œåˆæ­¥åˆ’åˆ†ï¼ˆæŒ‰æ—¶é—´ã€é¡µç ï¼‰
  * ç”Ÿæˆ Section
  * æ›´æ–° ContentPiece.section_id
  * è¾“å‡ºå„ Section çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ€»å­—æ•°ã€time_spanã€ç‰‡æ®µæ•°ï¼‰
* è‡ªåŠ¨è°ƒæ•´ï¼š

  * å¯¹è¿‡å° / è¿‡å¤§ Section è¿›è¡Œåˆå¹¶/äºŒæ¬¡æ‹†åˆ†ï¼ˆæ ¹æ®é…ç½®é˜ˆå€¼ï¼‰

### 5.6 è¯¾ç¨‹ç»“æ„ APIï¼ˆCourse Outlineï¼‰

* è¾“å‡º Course â†’ Lecture â†’ Section çš„æ ‘
* åŒ…å« Section çš„æ ‡é¢˜ã€summaryï¼ˆå¯å…ˆç®€ç•¥ï¼‰

### 5.7 Chunk Builder + Schema æ ¡éªŒ

* æŒ‰ Section å†…çš„ ContentPiece ç”Ÿæˆ Chunkï¼š

  * ä¾æ®é•¿åº¦æ§åˆ¶åˆå¹¶/åˆ‡åˆ†
  * æŒ‰é¡ºåºç”Ÿæˆ `order_in_section`
  * ä¼°ç®— `tokens_estimate`
* å°† Chunk æ˜ å°„ä¸ºç»Ÿä¸€ Ready-to-Embed schema
* ç¼–å†™ schema æ ¡éªŒé€»è¾‘ï¼š

  * æ£€æŸ¥å¿…å¡«å­—æ®µ
  * æ£€æŸ¥ç±»å‹æ­£ç¡®ï¼ˆå­—ç¬¦ä¸²/æ•°å­—/nullï¼‰

### 5.8 äººå·¥æ ¡æ­£å…¥å£ï¼ˆMVP æœ€å°ç‰ˆï¼‰

* æš‚å®šåšï¼š

  * Section æ ‡é¢˜ä¿®æ”¹æ¥å£
  * Section åˆå¹¶æ¥å£
* æœªæ¥å¯å†æ‰©å±•ï¼š

  * Section æ‹†åˆ†
  * å¯è§†åŒ–æ‹–æ‹½è°ƒæ•´è¾¹ç•Œ

---

## 6. é˜¶æ®µä¸€éªŒæ”¶ Checklistï¼ˆæ¶æ„è§†è§’ï¼‰

* âœ… ä»»æ„ä¸€ä¸ªè¯¾ç¨‹ï¼ˆè‡³å°‘ 1 ä¸ªè§†é¢‘ + 1 ä¸ª PPTï¼‰å¯ä»¥è·‘å®Œé˜¶æ®µä¸€æµç¨‹
* âœ… æ‰€æœ‰ Resource éƒ½æœ‰æ­£ç¡®çš„çŠ¶æ€ï¼ˆèƒ½çœ‹åˆ° pending â†’ queued â†’ running â†’ succeeded çš„æµè½¬ï¼‰
* âœ… æœ‰æ¥å£èƒ½çœ‹åˆ°ï¼š

  * è¯¾ç¨‹å¤§çº²ï¼ˆCourse / Lecture / Sectionï¼‰
  * æ¯ä¸ª Section çš„ç»Ÿè®¡ä¿¡æ¯
* âœ… æœ‰æ¥å£èƒ½æ‹¿åˆ°ï¼š

  * æŸ course çš„æ‰€æœ‰ Chunkï¼ˆå·²ç¬¦åˆ Ready-to-Embed schemaï¼‰
* âœ… Schema æ ¡éªŒè„šæœ¬é€šè¿‡
* âœ… å¯ä»¥ hand off ç»™é˜¶æ®µäºŒï¼šembedding åŒå­¦åªéœ€è¦ä¾æ® Chunk schema å†™ä»£ç å³å¯ï¼Œä¸éœ€è¦å…³å¿ƒè§†é¢‘/PPT ç»†èŠ‚

---

å¦‚æœä½ è§‰å¾—è¿™ç‰ˆå·²ç»æŠŠä½ å…³å¿ƒçš„ä¸‰ä¸ªå…³é”®ç‚¹éƒ½â€œé’‰æ­»â€äº†ï¼Œ
ä¸‹ä¸€æ­¥ä½ å¯ä»¥ï¼š

* è®©åç«¯æŒ‰è¿™ä»½æ–‡æ¡£å¼€å·¥
* æˆ–è€…æˆ‘ä»¬å†å†™ä¸€ä»½**ã€Œåç«¯æ¥å£è®¾è®¡æ–‡æ¡£ï¼ˆAPI Specï¼‰ã€**ï¼Œä¸“é—¨åˆ—å‡ºï¼š

  * åˆ›å»ºè¯¾ç¨‹ / èµ„æº
  * æŸ¥çœ‹èµ„æºçŠ¶æ€
  * è§¦å‘å¤„ç†
  * æŸ¥çœ‹è¯¾ç¨‹å¤§çº²
  * è·å– Chunk åˆ—è¡¨
    è¿™æ ·å‰åç«¯ã€ä»¥åŠ Stage2 çš„åŒå­¦å¯¹æ¥ä¼šæ›´é¡ºç•…ã€‚


å¥½çš„ï¼Œè¿™ä¸¤ç‚¹æˆ‘è¡¥å……æ˜ç¡®å¦‚ä¸‹ï¼ˆå¯ä»¥ç›´æ¥çº³å…¥æ­£å¼æ¶æ„æ–‡æ¡£ï¼‰ï¼š

---

# âœ…ï¼ˆè¡¥å…… 1ï¼‰Lecture è‡ªåŠ¨ç»‘å®šç­–ç•¥ï¼ˆç¡®ä¿ Chunk.lecture_id æ°¸ä¸ä¸ºç©ºï¼‰

ä¸ºäº†æ»¡è¶³ **Chunk.lecture_id å¿…å¡«** çš„éªŒæ”¶è¦æ±‚ï¼Œæˆ‘ä»¬åœ¨é˜¶æ®µä¸€åŠ å…¥**ç»Ÿä¸€çš„ Lecture è‡ªåŠ¨åˆ›å»º & ç»‘å®šè§„åˆ™**ï¼š

## 1. é»˜è®¤ Lecture åˆ›å»º/ç»‘å®šè§„åˆ™ï¼ˆæ— äººå·¥å¹²é¢„æ—¶ï¼‰

### **è§„åˆ™ Aï¼šæ¯ä¸ªè§†é¢‘èµ„æº = ä¸€èŠ‚ Lectureï¼ˆé»˜è®¤ç­–ç•¥ï¼‰**

* å½“ Resource.type = `video`ï¼š
  ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª Lectureï¼š

  ```
  lecture_id = new Lecture(
      title = video_title æˆ– â€œLecture Xâ€
      order_index = å½“å‰è¯¾ç¨‹å·²æœ‰ lecture æ•° + 1
  )
  ```
* å°†è¯¥ video çš„ `resource_id` ç»‘å®šåˆ° `lecture_id`ã€‚

**å¥½å¤„ï¼š**

* è§†é¢‘å¤©ç„¶æœ‰â€œè®²æ¬¡â€å±æ€§
* Sectioningã€Chunking ç²’åº¦éƒ½ä¸è§†é¢‘ä¸€è‡´ï¼Œé€»è¾‘æ¸…æ™°

### **è§„åˆ™ Bï¼šæ–‡æ¡£ç±»èµ„æºï¼ˆppt/pdf/textï¼‰ç»§æ‰¿æœ€è¿‘çš„ video Lecture**

* å½“ Resource.type âˆˆ {ppt, pdf, text}ï¼š
  ç³»ç»Ÿè‡ªåŠ¨ç»‘å®šåˆ°**æœ€è¿‘åˆ›å»ºçš„è§†é¢‘ Lecture**ï¼ˆåŒè¯¾ç¨‹å†… order æœ€å¤§çš„ video lectureï¼‰ã€‚
* è‹¥è¯¾ç¨‹è¿˜æ²¡æœ‰ä»»ä½•è§†é¢‘ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªé»˜è®¤ Lectureï¼š

  ```
  lecture_id = Lecture("Lecture 1ï¼ˆAutoï¼‰")
  ```

**å¥½å¤„ï¼š**

* PPT/PDF ä½œä¸ºâ€œè¯¥è®²æ¬¡çš„è¡¥å……èµ„æ–™â€å½’ç±»åˆç†
* ä¸å¼•å…¥ä¸å¿…è¦çš„ Lecture

---

## 2. å…è®¸ç”¨æˆ·è¦†ç›–è‡ªåŠ¨ç»‘å®šï¼ˆæœªæ¥å¯é€‰ï¼‰

é¢„ç•™æ¥å£ï¼ˆMVP å¯ä¸åšï¼‰ï¼š

* `PATCH /resource/{id}/lecture_id`
* ç”¨æˆ·/è¿è¥å¯äººå·¥è°ƒæ•´ Lecture å½’å±

---

## 3. Sectioning é˜¶æ®µä¾èµ– lecture_id

* Section çš„åˆ›å»º**å¿…é¡»ä»¥ lecture ç»´åº¦ä¸ºå•ä½**ï¼ˆå³ Lecture å†…ç‹¬ç«‹ Sectioningï¼‰ã€‚
* æ‰€ä»¥ lecture_id åœ¨ Sectioning ä¹‹å‰å°±å¿…é¡»ç¡®å®šã€‚
* æœ‰äº† lecture_idï¼ŒSectioning æ‰èƒ½æ­£ç¡®è¾“å‡ºç»“æ„ï¼š

  * Lecture â†’ Section â†’ Chunk

---

## 4. Chunk.lecture_id èµ‹å€¼é€»è¾‘ï¼ˆæœ€ç»ˆä¿è¯ä¸ä¸ºç©ºï¼‰

Chunk çš„ lecture_id æ¥è‡ªå®ƒæ‰€å± Section çš„ lecture_idï¼š

```
chunk.lecture_id = section.lecture_id
```

ç”±äº Section.creation ä¾èµ– lecture_idï¼Œä¸” Lecture é»˜è®¤åˆ›å»ºé€»è¾‘ç»Ÿä¸€ï¼Œå› æ­¤ Chunk.lecture_id èƒ½ä¿è¯ï¼š

âœ” æ°¸ä¸ä¸ºç©º
âœ” ä¸è¯¾ç¨‹å¤§çº²ç»“æ„å¼ºä¸€è‡´

---

# âœ…ï¼ˆè¡¥å…… 2ï¼‰çŠ¶æ€æœºçš„å­é˜¶æ®µæ ‡è¯†ï¼ˆå¤„ç†é˜¶æ®µå¯è§æ€§ï¼‰

å½“å‰ Resource.status åªæœ‰ä¸€çº§çŠ¶æ€ï¼š
`pending â†’ queued â†’ running â†’ succeeded/failed`

ä¸ºæé«˜å¯è§‚æµ‹æ€§å’Œå¯è°ƒè¯•æ€§ï¼Œå¼•å…¥**äºŒçº§å¤„ç†é˜¶æ®µå­—æ®µ**ï¼š

---

## 1. æ–°å¢å­—æ®µï¼š`processing_stage`

```
processing_stage: 
  "waiting"                // åˆå§‹é˜¶æ®µ
  "downloading"            // è§†é¢‘ä¸‹è½½/éŸ³é¢‘æŠ½å–
  "audio_extracting"       // æœ‰äº›å¹³å°å…ˆ extract audio
  "asr"                    // ASR è½¬å½•
  "doc_parsing"            // PPT/PDF/Text è§£æ
  "contentpiece_build"     // ç”Ÿæˆ ContentPiece
  "sectioning"             // Section åˆ’åˆ†
  "chunking"               // Chunk ç”Ÿæˆ
  "done"                   // å…¨éƒ¨ç”Ÿæˆå®Œæˆ
```

### **å­—æ®µè¯­ä¹‰ï¼š**

* **Resource.status â†’ å®è§‚å±‚çº§**ï¼ˆé˜Ÿåˆ—çŠ¶æ€ï¼šæ’é˜Ÿã€æ‰§è¡Œã€æˆåŠŸã€å¤±è´¥ï¼‰
* **processing_stage â†’ å¾®è§‚é˜¶æ®µ**ï¼ˆå…·ä½“åœ¨å“ªä¸€æ­¥ï¼‰

---

## 2. Worker åœ¨æ¯ä¸ªå­é˜¶æ®µå¿…é¡»æ›´æ–° processing_stage

ä¾‹å¦‚è§†é¢‘å¤„ç†æµæ°´çº¿ä¸­ï¼š

```
status = running
processing_stage = downloading

status = running
processing_stage = audio_extracting

status = running
processing_stage = asr

status = running
processing_stage = contentpiece_build
```

æ–‡æ¡£æµæ°´çº¿ï¼š

```
status = running
processing_stage = doc_parsing

status = running
processing_stage = contentpiece_build
```

Sectioning / Chunkingï¼š

```
status = running
processing_stage = sectioning

status = running
processing_stage = chunking
```

æœ€ç»ˆæˆåŠŸï¼š

```
status = succeeded
processing_stage = done
```

---

## 3. é”™è¯¯å®šä½æ›´ç²¾ç¡®

å½“æŸèµ„æºå¤±è´¥æ—¶ï¼š

```
resource.status = failed
resource.processing_stage = asr
resource.error_message = "Whisper GPU OOM..."
```

ä¸€çœ¼èƒ½å®šä½é—®é¢˜å‘ç”Ÿåœ¨ ASR é˜¶æ®µã€‚

---

## 4. å¯¹å¤–å±•ç¤ºè¿›åº¦ï¼ˆå‰ç«¯å¯ç”¨ï¼‰

å‰ç«¯å¯æ˜¾ç¤ºï¼š

```
å½“å‰è¿›åº¦ï¼šASR è½¬å½•ä¸­ï¼ˆ35%ï¼‰
```

ï¼ˆç™¾åˆ†æ¯”æœªæ¥å¯é€‰ï¼ŒMVP æ˜¾ç¤ºé˜¶æ®µåç§°å³å¯ï¼‰

---

# ğŸ¯ æœ€ç»ˆæ•ˆæœ

é€šè¿‡è¿™ä¸¤ä¸ªè¡¥å……ç‚¹ï¼š

### âœ” Chunk.lecture_id ä¿è¯æ°¸ä¸ä¸ºç©º

* è‡ªåŠ¨ Lecture æ˜ å°„è§„åˆ™
* Sectioning ä¾èµ– lecture
* Chunk ä» Section ç»§æ‰¿ lecture_id
  â†’ ç»“æ„å®Œæ•´ç¨³å®š

### âœ” é˜¶æ®µå†…è¿›åº¦ä¸€ç›®äº†ç„¶

* statusï¼šå®è§‚ï¼ˆæ’é˜Ÿ/æ‰§è¡Œ/æˆåŠŸ/å¤±è´¥ï¼‰
* processing_stageï¼šå¾®è§‚ï¼ˆdownload/asr/doc_parse/...ï¼‰
  â†’ ä¾¿äºè°ƒè¯•ã€æ’æŸ¥ã€å±•ç¤ºè¿›åº¦

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥æŠŠè¿™ä¸¤ä¸ªè¡¥å……æ­£å¼åˆå¹¶åˆ°ä½ å‰é¢é‚£ä»½ã€Œé˜¶æ®µä¸€æ¶æ„æ–‡æ¡£ v2ã€ï¼Œå˜æˆä¸€ä»½**å®Œæ•´çš„ v3 ç‰ˆæ¶æ„æ–‡æ¡£**ï¼Œå¯ä»¥ç›´æ¥äº¤ç»™å¼€å‘å›¢é˜Ÿæ‰§è¡Œã€‚
